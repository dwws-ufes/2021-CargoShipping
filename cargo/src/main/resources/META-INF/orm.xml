<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="https://jakarta.ee/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence/orm https://jakarta.ee/xml/ns/persistence/orm/orm_3_0.xsd" version="3.0">

    <package>br.ufes.dwws.cargo</package>
    <schema>cargo</schema>
    <access>FIELD</access>

    <entity class="Cargo" metadata-complete="true">
        <attributes>
            <embedded-id name="trackingId">
                <attribute-override name="trackingId">
                    <column name="tracking_id"/>
                </attribute-override>
            </embedded-id>
            <version name="version">
                <column nullable="false"/>
            </version>
            <embedded name="origin">
                <attribute-override name="unlocode">
                    <column name="origin_unlocode"/>
                </attribute-override>
            </embedded>
            <embedded name="routeSpecification"/>
            <embedded name="itinerary">
                <association-override name="legs">
                    <join-table name="Itinerary">
                        <join-column name="tracking_id"/>
                    </join-table>
                </association-override>
            </embedded>
        </attributes>
    </entity>

    <embeddable class="TrackingId" metadata-complete="true">
        <attributes>
            <basic name="trackingId" optional="false"/>
        </attributes>
    </embeddable>

    <embeddable class="RouteSpecification" metadata-complete="true">
        <attributes>
            <basic name="arrivalDeadline" optional="false">
                <column name="specification_arrival_deadline"/>
            </basic>
            <embedded name="origin">
                <attribute-override name="unlocode">
                    <column name="specification_origin_unlocode"/>
                </attribute-override>
            </embedded>
            <embedded name="destination">
                <attribute-override name="unlocode">
                    <column name="specification_destination_unlocode"/>
                </attribute-override>
            </embedded>
        </attributes>
    </embeddable>

    <embeddable class="Itinerary" metadata-complete="true">
        <attributes>
            <element-collection name="legs"/>
        </attributes>
    </embeddable>

    <embeddable class="Leg" metadata-complete="true">
        <attributes>
            <basic name="loadTime" optional="false">
                <column name="load_time"/>
            </basic>
            <basic name="unloadTime" optional="false">
                <column name="unload_time"/>
            </basic>
            <embedded name="voyageNumber">
                <attribute-override name="number">
                    <column name="voyage_number"/>
                </attribute-override>
            </embedded>
            <embedded name="loadLocation">
                <attribute-override name="unlocode">
                    <column name="load_unlocode"/>
                </attribute-override>
            </embedded>
            <embedded name="unloadLocation">
                <attribute-override name="unlocode">
                    <column name="unload_unlocode"/>
                </attribute-override>
            </embedded>
        </attributes>
    </embeddable>

</entity-mappings>
